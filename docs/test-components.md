# What is a Test Component?

Unit tests are run as test components.
A test component is a single CppuTest exectuable.

Test components make it easy to compile selected parts of the production code.
This is in line with the theme of Test Driven Development.
Tests should be isolated, fast to build and fast to execute.

Components can be named anything except for _mocks_, _scripts_, _compiler_flags_, _cpputest_config_, _dockerfile_, and _Makefile_.

The [new component command](./command-reference.md#create-a-new-component) should be used to initialise a test component.

# Structure of a Test Component
A test component manifests itself as a folder in the `/unit-tests` directory.

Every component has a `main.cpp` file.
This is the entry point of the test executable.

A file called `Makefile` is also required.
This is where the production source files and include directories are specified.

A makefile generated by the new component command will look something like this:
```make
# Name of component under test - required
COMPONENT_NAME = component-name

# cpputest configuration - required
include ../../unit-test-executor/cpputest-config

# Includes (.hpp) for this component
# The += is important!
INCLUDE_DIRS += \
$(PROJECT_DIR)/include/ \
$(PROJECT_DIR)/unit-tests/mocks/include/ \

# Source files (.cpp) for this component
SRC_FILES = \
$(PROJECT_DIR)/source/main.cpp

# Run MakefileWorker.mk with the variables set in this Makefile - required
include $(CPPUTEST_HOME)/build/MakefileWorker.mk
```

In general, it should only be necessary to edit the `INCLUDE_DIRS` and `SRC_FILES` variables.

Tests are written in `.cpp` files in the test component's directory.
There can be any number of test source files.
Flubber automatically compiles all the test files.

The most basic test file supporting mocking looks like this:
```
#include "CppUTest/TestHarness.h"
#include "CppUTestExt/MockSupport.h"

TEST_GROUP(example)
{
    void setup()
    {
    }

    void teardown()
    {
    }
};

TEST(example, your_first_test)
{
    CHECK(false);
}
```

The directory for a test component with the name 'my-component' looks like this, where the files *tests_one.cpp* to *tests_n.cpp* can have any name and contain the tests.
```bash
── my-component
   ├── main.cpp
   ├── Makefile
   ├── tests_one.cpp
   ├── tests_two.cpp
   ├── .
   ├── .
   ├── .
   └── tests_n.cpp
```
